import {
  ScrollRise,
  StaticActor,
  TimeFrame,
  MoveMotion,
  SizeMotion,
  OpacityMotion,
  StickyPlatformScene,
  Value,
} from "scroll-rise";

const sceneHeight: Value = (w, h) => (h * 2);

const blockWidth: Value = (w, h) => w/4;
const blockHeight: Value = (w, h) => h/8;

const firstHalfBlockX: Value = (w, h) => w/4 - blockWidth(w, h)/2;
const secondHalfStartBlockX: Value = (w, h) => w/4 * 3 - blockWidth(w, h)/2;
const secondHalfEndBlockX: Value = (w, h) => w/2;
const firstHalfBlockY: Value = (w, h) => h/8 - blockHeight(w, h)/2;
const secondHalfBlockY: Value = (w, h) => h/8 * 3 - blockHeight(w, h)/2;

const endBlockWidth: Value = (w, h) => w/2 - firstHalfBlockX(w, h);

const agendaStartWidth: Value = (w, h) => w/4;
const agendaStartHeight: Value = (w, h) => h/4;
const agendaEndWidth: Value = (w, h) => w/2;
const agendaEndHeight: Value = (w, h) => h/2;

scrollRise(stickyPlatformScene(
  document.getElementById('scene')!,
  sceneHeight,
).operate([
  timeFrame(
    (w, h) => 0, (w, h) => h/2, [
      staticActor(document.getElementById('first-block')!).motions([
        opacityMotion({
          start: () => 1,
          end: () => 0,
        }),
        moveMotion({
          startX: firstHalfBlockX,
          endX: firstHalfBlockX,
          startY: firstHalfBlockY,
          endY: firstHalfBlockY,
        }),
        hideBlockMotion,
      ]),
      staticActor(document.getElementById('second-block')!).motions([
        moveMotion({
          startX: secondHalfStartBlockX,
          endX: secondHalfEndBlockX,
          startY: firstHalfBlockY,
          endY: firstHalfBlockY,
        }),
        sizeMotion({
          startWidth: blockWidth,
          startHeight: blockHeight,
          endWidth: endBlockWidth,
          endHeight: blockHeight,
        }),
        hideBlockMotion,
      ]),
      staticActor(document.getElementById('third-block')!).motions([
        moveMotion({
          startX: firstHalfBlockX,
          endX: firstHalfBlockX,
          startY: secondHalfBlockY,
          endY: secondHalfBlockY,
        }),
        sizeMotion({
          startWidth: blockWidth,
          startHeight: blockHeight,
          endWidth: endBlockWidth,
          endHeight: blockHeight,
        }),
        hideBlockMotion,
      ]),
      staticActor(document.getElementById('fourth-block')!).motions([
        moveMotion({
          startX: secondHalfStartBlockX,
          endX: secondHalfEndBlockX,
          startY: secondHalfBlockY,
          endY: secondHalfBlockY,
        }),
        sizeMotion({
          startWidth: blockWidth,
          startHeight: blockHeight,
          endWidth: endBlockWidth,
          endHeight: blockHeight,
        }),
        hideBlockMotion,
      ]),
      staticActor(document.getElementById('agenda')!).motions([
        moveMotion({
          startX: (w, h) => w/2 - agendaStartWidth(w, h)/2,
          endX: (w, h) => w/2 - agendaEndWidth(w, h)/2,
          startY: (w, h) => h/4 - agendaStartHeight(w, h)/2,
          endY: (w, h) => h/4 - agendaEndHeight(w, h)/2,
        }),
        sizeMotion({
          startWidth: agendaStartWidth,
          startHeight: agendaStartHeight,
          endWidth: agendaEndWidth,
          endHeight: agendaEndHeight,
        }),
        opacityMotion({
          start: () => 0,
          end: () => 1,
        }),
      ]),
    ]
  )
]));
